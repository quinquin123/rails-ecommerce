<% content_for :title, "Approve User" %>

<div class="row justify-content-center">
  <div class="col-lg-6">
    <div class="card shadow-lg border-0">
      <div class="card-header bg-success text-white text-center py-4">
        <div class="mb-3">
          <i class="fas fa-user-check fa-3x"></i>
        </div>
        <h3 class="mb-0">Approve User Account</h3>
        <p class="mb-0 opacity-75">Confirm user approval</p>
      </div>
      
      <div class="card-body p-4">
        <!-- User Information Preview -->
        <div class="alert alert-info" role="alert">
          <div class="d-flex align-items-center">
            <i class="fas fa-info-circle fa-lg me-3"></i>
            <div>
              <strong>You are about to approve this user account:</strong>
              <br>
              <small class="text-muted">This action will activate the user's account and grant them access to the platform.</small>
            </div>
          </div>
        </div>

        <!-- User Details Card -->
        <div class="card bg-light border-0 mb-4">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-auto">
                <div class="avatar-lg">
                  <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white" style="width: 60px; height: 60px; font-size: 1.5rem;">
                    <%= @user.name&.first&.upcase || @user.email.first.upcase %>
                  </div>
                </div>
              </div>
              <div class="col">
                <h5 class="mb-1">
                  <%= @user.name.present? ? @user.name : 'User' %>
                </h5>
                <p class="text-muted mb-2">
                  <i class="fas fa-envelope me-1"></i>
                  <%= @user.email %>
                </p>
                <div class="d-flex gap-2">
                  <span class="badge bg-warning">
                    <i class="fas fa-<%= @user.role == 'seller' ? 'store' : 'shopping-cart' %> me-1"></i>
                    <%= @user.role.capitalize %>
                  </span>
                  <span class="badge bg-warning">
                    <i class="fas fa-clock me-1"></i>
                    Pending Approval
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Additional Information -->
        <div class="row mb-4">
          <div class="col-sm-6">
            <label class="form-label text-muted small">Member Since</label>
            <div class="fw-bold">
              <%= @user.created_at.strftime("%B %d, %Y") %>
            </div>
          </div>
          <div class="col-sm-6">
            <label class="form-label text-muted small">Account Status</label>
            <div>
              <span class="badge bg-warning">
                <i class="fas fa-hourglass-half me-1"></i>
                Pending Approval
              </span>
            </div>
          </div>
        </div>

        <!-- Warning Message -->
        <div class="alert alert-warning" role="alert">
          <div class="d-flex">
            <i class="fas fa-exclamation-triangle me-3 mt-1"></i>
            <div>
              <strong>Please Review Carefully</strong>
              <br>
              <small>Once approved, this user will have full access to their account features. Make sure you have verified their information before proceeding.</small>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <%= link_to users_path, class: "btn btn-outline-secondary me-md-2" do %>
            <i class="fas fa-arrow-left me-1"></i>
            Cancel
          <% end %>
          
          <%= link_to user_path(@user), class: "btn btn-outline-info me-md-2" do %>
            <i class="fas fa-eye me-1"></i>
            View Details
          <% end %>
          
          <%= link_to approve_user_path(@user),
              class: "btn btn-success btn-lg", 
              data: { 
                turbo_method: :patch,
                turbo_confirm: "Are you sure you want to approve #{@user.name || @user.email}? This action cannot be undone." 
              } do %>
            <i class="fas fa-check me-2"></i>
            Approve User Account
          <% end %>
        </div>
      </div>
      
      <div class="card-footer bg-light text-center">
        <small class="text-muted">
          <i class="fas fa-shield-alt me-1"></i>
          This action requires administrator privileges
        </small>
      </div>
    </div>
  </div>
</div>

<!-- Additional Information Panel -->
<div class="row justify-content-center mt-4">
  <div class="col-lg-6">
    <div class="card border-0 shadow-sm">
      <div class="card-body">
        <h6 class="card-title">
          <i class="fas fa-question-circle me-2"></i>
          What happens when you approve this user?
        </h6>
        <ul class="list-unstyled mb-0">
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>
            User status will change from "Pending" to "Active"
          </li>
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>
            User will gain full access to platform features
          </li>
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>
            <% if @user.seller? %>
              User can start listing and selling products
            <% else %>
              User can start browsing and purchasing products
            <% end %>
          </li>
          <li class="mb-0">
            <i class="fas fa-check text-success me-2"></i>
            User will receive a confirmation notification
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<style>
  .avatar-lg {
    flex-shrink: 0;
  }
  
  .card-header.bg-success {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%) !important;
  }
  
  .btn-success.btn-lg {
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
    transition: all 0.3s ease;
  }
  
  .btn-success.btn-lg:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
  }
  
  .alert {
    border: none;
    border-radius: 10px;
  }
  
  .card {
    border-radius: 15px;
    overflow: hidden;
  }
</style>